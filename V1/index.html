<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>youtube - Video - Player</title>
<link id="favicon-light" rel="icon" href="../icon-light.svg" media="(prefers-color-scheme: light)" />
<link id="favicon-dark" rel="icon" href="../icon-dark.svg" media="(prefers-color-scheme: dark)" />
<style>
  :root {
    --bg-light: #fff8f0;
    --text-light: #3b2f2f;
    --btn-bg-light: #d27d60;
    --btn-hover-light: #b25b39;
    --bg-dark: #1e1a14;
    --text-dark: #f4ece2;
    --btn-bg-dark: #8a5e3f;
    --btn-hover-dark: #5f3d26;
  }
  body {
    margin: 0; padding: 20px;
    font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
    background-color: var(--bg-light);
    color: var(--text-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
    transition: background-color 0.3s, color 0.3s;
    box-sizing: border-box;
  }
  @media (prefers-color-scheme: dark) {
    body {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }
    button {
      background-color: var(--btn-bg-dark);
      color: var(--text-dark);
    }
    button:hover:not(:disabled) {
      background-color: var(--btn-hover-dark);
    }
    input[type="text"], input[type="number"] {
      border-color: var(--btn-bg-dark);
      color: var(--text-dark);
      background-color: #3b2f2f;
    }
    input[type="text"]:focus, input[type="number"]:focus {
      border-color: var(--btn-hover-dark);
      outline: none;
    }
  }
  h1 {
    font-size: 2rem;
    margin-bottom: 1em;
  }
  #youtube-url {
    width: 100%;
    max-width: 560px;
    font-size: 1.1em;
    padding: 10px;
    border: 2px solid var(--btn-bg-light);
    border-radius: 6px;
    background: transparent;
    color: inherit;
    transition: border-color 0.3s;
    margin-bottom: 15px;
    box-sizing: border-box;
  }
  #youtube-url:focus {
    border-color: var(--btn-hover-light);
  }
  button {
    padding: 10px 16px;
    font-size: 1em;
    border: none;
    border-radius: 6px;
    background-color: var(--btn-bg-light);
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    -webkit-user-select: none;
    user-select: none;
    white-space: nowrap;
    min-width: 90px;
  }
  button:hover:not(:disabled) {
    background-color: var(--btn-hover-light);
  }
  button:disabled {
    opacity: 0.5;
    cursor: default;
  }
  #action-buttons {
    margin-bottom: 15px;
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  #player {
    margin: 0 auto 20px;
    width: 100%;
    max-width: 560px;
    height: 315px;
    display: none;
  }
  #controls {
    margin: 0 auto 15px;
    max-width: 700px;
    display: none;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }
  .btn-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    flex-grow: 0;
    justify-content: center;
    min-width: 180px;
  }
  @media (max-width: 600px) {
    #controls {
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }
    .btn-group {
      justify-content: center !important;
      min-width: auto;
      width: 90vw;
      max-width: 360px;
    }
  }
  #time-display {
    margin: 0 auto 20px;
    max-width: 700px;
    display: none;
    justify-content: center;
    gap: 8px;
  }
  .time-segment {
    background-color: var(--btn-bg-light);
    border-radius: 6px;
    padding: 6px 10px;
    color: white;
    -webkit-user-select: none;
    user-select: none;
    min-width: 50px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .time-segment:hover {
    background-color: var(--btn-hover-light);
  }
  .btn-up, .btn-down {
    background: transparent;
    border: none;
    color: white;
    font-weight: bold;
    font-size: 1.3em;
    line-height: 1;
    cursor: pointer;
    -webkit-user-select: none;
    user-select: none;
    padding: 0;
    margin: 2px 0;
    transition: color 0.3s;
  }
  .btn-up:hover, .btn-down:hover {
    color: #fff3db;
  }
  @media (prefers-color-scheme: dark) {
    .time-segment {
      background-color: var(--btn-bg-dark);
      color: var(--text-dark);
    }
    .time-segment:hover {
      background-color: var(--btn-hover-dark);
    }
    .btn-up, .btn-down {
      color: var(--text-dark);
    }
    .btn-up:hover, .btn-down:hover {
      color: #f0deb7;
    }
    button {
      background-color: var(--btn-bg-dark);
      color: var(--text-dark);
    }
    button:hover:not(:disabled) {
      background-color: var(--btn-hover-dark);
    }
  }
  #jump-time {
    margin: 0 auto;
    max-width: 700px;
    display: none;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    align-items: center;
  }
  #jump-time label {
    font-weight: bold;
    -webkit-user-select: none;
    user-select: none;
    min-width: 20px;
    margin-left: 8px;
    color: #b25b39;
  }
  #jump-time input[type="number"] {
    color: #5a3d1f;
    border: 2px solid #b25b39;
    background-color: #fff8f0;
    font-weight: bold;
    border-radius: 6px;
    padding: 5px 8px;
    width: 50px;
    text-align: center;
  }
  #jump-time input[type="number"]:focus {
    border-color: #8a5e3f;
    outline: none;
  }
  @media (prefers-color-scheme: dark) {
    #jump-time label {
      color: #f0deb7;
    }
    #jump-time input[type="number"] {
      color: var(--text-dark);
      border-color: var(--btn-bg-dark);
      background-color: #3b2f2f;
    }
    #jump-time input[type="number"]:focus {
      border-color: var(--btn-hover-dark);
    }
  }
  @media (max-width: 600px) {
    #jump-time {
      gap: 10px;
    }
    #jump-time button {
      width: 90vw;
      max-width: 360px;
      margin-left: 0;
    }
  }
  #speed-controls {
    margin: 0 auto 20px;
    max-width: 700px;
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  #speed-controls label {
    font-weight: bold;
    -webkit-user-select: none;
    user-select: none;
    color: #b25b39;
  }
  #speed-controls input[type="range"] {
    width: 100%;
    max-width: 560px;
  }
  #speed-controls button {
    min-width: 60px;
    background-color: var(--btn-bg-light);
    border-radius: 6px;
    padding: 6px 10px;
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #speed-controls button:hover:not(:disabled) {
    background-color: var(--btn-hover-light);
  }
  @media (prefers-color-scheme: dark) {
    #speed-controls label {
      color: #f0deb7;
    }
    #speed-controls button {
      background-color: var(--btn-bg-dark);
      color: var(--text-dark);
    }
    #speed-controls button:hover:not(:disabled) {
      background-color: var(--btn-hover-dark);
    }
  }
  #message {
    margin: 1em 0;
    font-weight: bold;
    min-height: 1.2em;
    color: #b25b39;
    -webkit-user-select: none;
    user-select: none;
  }
  @media (prefers-color-scheme: dark) {
    #message {
      color: #f0deb7;
    }
  }
  footer {
    margin-top: auto;
    padding-top: 1em;
    font-size: 0.9em;
    color: #888;
  }
  footer a {
    color: inherit;
    text-decoration: none;
  }
  .time-separator {
    font-size: 1.3em;
    -webkit-user-select: none;
    user-select: none;
    line-height: 1.6;
  }
</style>
</head>
<body>

<h1>ğŸ¬YouTube Video PlayerğŸ¬</h1>

<input type="text" id="youtube-url" placeholder="YouTubeãƒªãƒ³ã‚¯ ã¾ãŸã¯ å‹•ç”»IDã‚’å…¥åŠ›" autocomplete="off" aria-label="YouTubeå‹•ç”»URLã¾ãŸã¯å‹•ç”»IDå…¥åŠ›" />

<div id="action-buttons">
  <button id="start-btn" onclick="loadVideo()">â–¶ï¸ é–‹å§‹</button>
  <button id="reset-btn" onclick="resetPlayer()">ğŸ”ãƒªã‚»ãƒƒãƒˆ</button>
</div>

<div id="message" role="alert" aria-live="polite"></div>

<div id="player"></div>

<div id="controls" aria-label="å‹•ç”»æ“ä½œãƒœã‚¿ãƒ³ç¾¤">
  <div class="btn-group left">
    <button id="play-pause-btn" title="å†ç”Ÿ/ä¸€æ™‚åœæ­¢ãƒˆã‚°ãƒ«" onclick="togglePlayPause()" disabled>â–¶ï¸ å†ç”Ÿ</button>
    <button id="stop-btn" title="åœæ­¢ â¹" onclick="stopVideo()" disabled>â¹ åœæ­¢</button>
  </div>
  <div class="btn-group center">
    <button id="vol-up-btn" title="éŸ³é‡ï¼‹ ğŸ”Š" onclick="changeVolume(10)" disabled>ğŸ”Š éŸ³é‡ï¼‹</button>
    <button id="vol-down-btn" title="éŸ³é‡ï¼ ğŸ”‰" onclick="changeVolume(-10)" disabled>ğŸ”‰ éŸ³é‡ï¼</button>
    <button id="mute-btn" title="ãƒŸãƒ¥ãƒ¼ãƒˆåˆ‡æ›¿ ğŸ”‡" onclick="toggleMute()" disabled>ğŸ”‡ ãƒŸãƒ¥ãƒ¼ãƒˆåˆ‡æ›¿</button>
  </div>
  <div class="btn-group right">
    <button id="seek-minus-15-btn" title="ï¼15ç§’ âªâª" onclick="seekSeconds(-15)" disabled>âªâª -15ç§’</button>
    <button id="seek-minus-5-btn" title="ï¼5ç§’ âª" onclick="seekSeconds(-5)" disabled>âª -5ç§’</button>
    <button id="seek-plus-5-btn" title="ï¼‹5ç§’ â©" onclick="seekSeconds(5)" disabled>â© +5ç§’</button>
    <button id="seek-plus-15-btn" title="ï¼‹15ç§’ â©â©" onclick="seekSeconds(15)" disabled>â©â© +15ç§’</button>
  </div>
  <div class="btn-group">
    <button id="loop-btn" title="ãƒ«ãƒ¼ãƒ—åˆ‡æ›¿" onclick="toggleLoop()" disabled>ğŸ” ãƒ«ãƒ¼ãƒ—OFF</button>
  </div>
</div>

<span id="time-display" aria-live="polite" aria-atomic="true" aria-label="å†ç”Ÿæ™‚é–“è¡¨ç¤º">
  <div class="time-segment" id="hour-segment">
    <button class="btn-up" aria-label="æ™‚ã‚’å¢—ã‚„ã™">â–²</button>
    <span id="time-hour">00</span>
    <button class="btn-down" aria-label="æ™‚ã‚’æ¸›ã‚‰ã™">â–¼</button>
  </div>
  <span class="time-separator">:</span>
  <div class="time-segment" id="minute-segment">
    <button class="btn-up" aria-label="åˆ†ã‚’å¢—ã‚„ã™">â–²</button>
    <span id="time-minute">00</span>
    <button class="btn-down" aria-label="åˆ†ã‚’æ¸›ã‚‰ã™">â–¼</button>
  </div>
  <span class="time-separator">:</span>
  <div class="time-segment" id="second-segment">
    <button class="btn-up" aria-label="ç§’ã‚’å¢—ã‚„ã™">â–²</button>
    <span id="time-second">00</span>
    <button class="btn-down" aria-label="ç§’ã‚’æ¸›ã‚‰ã™">â–¼</button>
  </div>
</span>

<div id="jump-time" aria-label="ã‚¸ãƒ£ãƒ³ãƒ—æ™‚é–“å…¥åŠ›">
  <input type="number" id="hours" min="0" max="99" step="1" value="0" aria-describedby="message" />
  <label for="hours">æ™‚</label>
  <input type="number" id="minutes" min="0" max="59" step="1" value="0" aria-describedby="message" />
  <label for="minutes">åˆ†</label>
  <input type="number" id="seconds" min="0" max="59" step="1" value="0" aria-describedby="message" />
  <label for="seconds">ç§’</label>
  <button id="jump-btn" onclick="jumpToTime()" disabled>â© ã‚¸ãƒ£ãƒ³ãƒ—</button>
</div>

<div id="speed-controls" aria-label="å†ç”Ÿé€Ÿåº¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«">
  <label for="speed-slider">ğŸš å†ç”Ÿé€Ÿåº¦: <span id="speed-value">1.00</span>x</label>

 <input type="range" id="speed-slider" min="0.25" max="4" step="0.05" value="1" />
<div>
  <button onclick="setPlaybackSpeed(0.25)">0.25x</button>
  <button onclick="setPlaybackSpeed(0.5)">0.5x</button>
  <button onclick="setPlaybackSpeed(1)">1x</button>
  <button onclick="setPlaybackSpeed(1.5)">1.5x</button>
  <button onclick="setPlaybackSpeed(1.75)">1.75x</button>
  <button onclick="setPlaybackSpeed(2)">2x</button>
  <button onclick="setPlaybackSpeed(3)">3x</button>
  <button onclick="setPlaybackSpeed(4)">4x</button>
</div>
</div>

<footer id="footer-copy"></footer>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
  let player;
  
  const footer = document.getElementById("footer-copy");
  const baseYear = 2025;
  const currentYear = new Date().getFullYear();
  const yearString = `${baseYear}${currentYear > baseYear ? "~" + currentYear : ""}`;
  const hostname = location.hostname;
  let footerHTML = "";

  if (hostname === "hamuzon.github.io") {
      footerHTML = `&copy; ${yearString} <a class="link" href="https://hamuzon.github.io" target="_blank" rel="noopener noreferrer">@hamuzon</a>`;
  } else if (hostname.includes("hamuzon-jp.f5.si")) {
      footerHTML = `&copy; ${yearString} <a class="link" href="https://hamuzon-jp.f5.si" target="_blank" rel="noopener noreferrer">@hamuzon</a>`;
  } else if (hostname.includes("hamusata.f5.si")) {
      footerHTML = `&copy; ${yearString} <a class="link" href="https://hamusata.f5.si" target="_blank" rel="noopener noreferrer">@hamusata</a>`;
  } else {
      footerHTML = `&copy; ${yearString} Video Player HUB`;
  }
  footer.innerHTML = footerHTML;

  let videoDuration = 0;
  let isLoop = false;
  let timeUpdateInterval = null;

  // å‹•ç”»IDæŠ½å‡ºï¼ˆURLã¾ãŸã¯IDç›´æ¥å…¥åŠ›å¯¾å¿œï¼‰
  function extractVideoId(url) {
    if (!url) return null;
    url = url.trim();
    if (/^[a-zA-Z0-9_-]{11}$/.test(url)) return url;
    const regex = /(?:https?:\/\/)?(?:www\.|music\.|kids\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/|shorts\/|v\/)?([a-zA-Z0-9_-]{11})/;
    const match = url.match(regex);
    return match ? match[1] : null;
  }

  function showMessage(msg) {
    const m = document.getElementById('message');
    m.textContent = msg;
  }

  function clearMessage() {
    showMessage('');
  }

  // æ“ä½œãƒœã‚¿ãƒ³ãƒ»ã‚¸ãƒ£ãƒ³ãƒ—ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹ãƒ»ç„¡åŠ¹åˆ‡æ›¿
  function updateControlsState(enabled) {
    const controls = document.querySelectorAll('#controls button, #jump-btn');
    controls.forEach(btn => {
      btn.disabled = !enabled;
    });
  }

  function resetInputs() {
    document.getElementById('hours').value = 0;
    document.getElementById('minutes').value = 0;
    document.getElementById('seconds').value = 0;
    updateTimeDisplay(0);
  }

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒªã‚»ãƒƒãƒˆ
  function resetPlayer() {
    if (player) {
      player.stopVideo();
      player.destroy();
      player = null;
    }
    videoDuration = 0;
    document.getElementById('player').style.display = 'none';
    document.getElementById('controls').style.display = 'none';
    document.getElementById('time-display').style.display = 'none';
    document.getElementById('jump-time').style.display = 'none';
    document.getElementById('speed-controls').style.display = 'none';
    updateControlsState(false);
    resetInputs();
    clearMessage();
    isLoop = false;
    document.getElementById('loop-btn').textContent = 'ğŸ” ãƒ«ãƒ¼ãƒ—OFF';
    stopTimeSync();
  }

  // å‹•ç”»èª­ã¿è¾¼ã¿ï¼†è¡¨ç¤ºé–‹å§‹
  function loadVideo() {
    clearMessage();
    let input = document.getElementById('youtube-url').value;
    const videoId = extractVideoId(input);
    if (!videoId) {
      showMessage('æœ‰åŠ¹ãªYouTubeå‹•ç”»IDã¾ãŸã¯URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
      return;
    }
    if (player) {
      player.destroy();
      player = null;
    }

    document.getElementById('player').style.display = 'block';
    document.getElementById('controls').style.display = 'flex';
    document.getElementById('time-display').style.display = 'flex';
    document.getElementById('jump-time').style.display = 'flex';
    document.getElementById('speed-controls').style.display = 'flex';

    player = new YT.Player('player', {
      height: '315',
      width: '560',
      videoId: videoId,
      playerVars: {
        controls: 1,
        modestbranding: 1,
        rel: 0,
        fs: 1,
        disablekb: 0,
        autoplay: 0,
        origin: location.origin,
        iv_load_policy: 3,
        enablejsapi: 1,
        cc_load_policy: 0,
      },
      events: {
        onReady: onPlayerReady,
        onStateChange: onPlayerStateChange,
        onError: onPlayerError,
      }
    });
  }

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æº–å‚™å®Œäº†æ™‚
  function onPlayerReady(event) {
    videoDuration = player.getDuration();
    resetInputs();
    updateControlsState(true);
    updatePlayPauseButton();
    setPlaybackSpeed(1);
    startTimeSync();
  }

  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹å¤‰æ›´æ™‚
  function onPlayerStateChange(event) {
    updatePlayPauseButton();
    if (event.data == YT.PlayerState.ENDED && isLoop) {
      player.seekTo(0);
      player.playVideo();
    }
  }

  // ã‚¨ãƒ©ãƒ¼æ™‚
  function onPlayerError(event) {
    showMessage('å‹•ç”»ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
    updateControlsState(false);
  }

  // å†ç”Ÿ/ä¸€æ™‚åœæ­¢ãƒˆã‚°ãƒ«
  function togglePlayPause() {
    if (!player) return;
    const state = player.getPlayerState();
    if (state === YT.PlayerState.PLAYING) {
      player.pauseVideo();
    } else {
      player.playVideo();
    }
  }

  // å†ç”Ÿ/ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³è¡¨ç¤ºæ›´æ–°
  function updatePlayPauseButton() {
    const btn = document.getElementById('play-pause-btn');
    if (!player) {
      btn.textContent = 'â–¶ï¸ å†ç”Ÿ';
      btn.disabled = true;
      return;
    }
    const state = player.getPlayerState();
    if (state === YT.PlayerState.PLAYING) {
      btn.textContent = 'â¸ ä¸€æ™‚åœæ­¢';
      btn.disabled = false;
    } else if (state === YT.PlayerState.PAUSED || state === YT.PlayerState.ENDED || state === YT.PlayerState.UNSTARTED) {
      btn.textContent = 'â–¶ï¸ å†ç”Ÿ';
      btn.disabled = false;
    } else {
      btn.textContent = 'â–¶ï¸ å†ç”Ÿ';
      btn.disabled = true;
    }
  }

  // åœæ­¢
  function stopVideo() {
    if (!player) return;
    player.stopVideo();
  }

  // éŸ³é‡å¤‰æ›´ï¼ˆå¼•æ•°ã¯å¢—æ¸›å€¤ï¼‰
  function changeVolume(delta) {
    if (!player) return;
    let vol = player.getVolume();
    vol = Math.min(100, Math.max(0, vol + delta));
    player.setVolume(vol);
  }

  // ãƒŸãƒ¥ãƒ¼ãƒˆåˆ‡æ›¿
  function toggleMute() {
    if (!player) return;
    if (player.isMuted()) {
      player.unMute();
    } else {
      player.mute();
    }
  }

  // ã‚·ãƒ¼ã‚¯ï¼ˆç§’æ•°ã‚’è¶³ã™ï¼‰
  function seekSeconds(seconds) {
    if (!player) return;
    let time = player.getCurrentTime() + seconds;
    if (time < 0) time = 0;
    if (videoDuration && time > videoDuration) time = videoDuration;
    player.seekTo(time, true);
  }

  // ãƒ«ãƒ¼ãƒ—åˆ‡æ›¿
  function toggleLoop() {
    isLoop = !isLoop;
    document.getElementById('loop-btn').textContent = isLoop ? 'ğŸ” ãƒ«ãƒ¼ãƒ—ON' : 'ğŸ” ãƒ«ãƒ¼ãƒ—OFF';
  }

  // å†ç”Ÿé€Ÿåº¦è¨­å®š
  function setPlaybackSpeed(speed) {
    if (!player) return;
    player.setPlaybackRate(speed);
    document.getElementById('speed-slider').value = speed;
    document.getElementById('speed-value').textContent = speed.toFixed(2);
  }

  // å†ç”Ÿé€Ÿåº¦ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼é€£å‹•
  document.getElementById('speed-slider').addEventListener('input', (e) => {
    setPlaybackSpeed(parseFloat(e.target.value));
  });

  // å†ç”Ÿæ™‚é–“è¡¨ç¤ºæ›´æ–°ï¼ˆæ™‚åˆ†ç§’ï¼‰
  function updateTimeDisplay(seconds) {
    const h = Math.floor(seconds / 3600);
    const m = Math.floor((seconds % 3600) / 60);
    const s = Math.floor(seconds % 60);
    document.getElementById('time-hour').textContent = String(h).padStart(2, '0');
    document.getElementById('time-minute').textContent = String(m).padStart(2, '0');
    document.getElementById('time-second').textContent = String(s).padStart(2, '0');
  }

  // æ™‚åˆ†ç§’ã®ãƒœã‚¿ãƒ³æ“ä½œ (UIä¸Šã®æ™‚åˆ†ç§’ã®ï¼‹ï¼ãƒœã‚¿ãƒ³ï¼‰
  document.querySelectorAll('.time-segment').forEach(segment => {
    const upBtn = segment.querySelector('.btn-up');
    const downBtn = segment.querySelector('.btn-down');
    const span = segment.querySelector('span');
    const id = segment.id;

    upBtn.addEventListener('click', () => {
      let val = parseInt(span.textContent, 10);
      if (id === 'hour-segment' && val < 99) {
        val++;
      } else if (id === 'minute-segment' && val < 59) {
        val++;
      } else if (id === 'second-segment' && val < 59) {
        val++;
      }
      span.textContent = String(val).padStart(2, '0');
    });

    downBtn.addEventListener('click', () => {
      let val = parseInt(span.textContent, 10);
      if (val > 0) val--;
      span.textContent = String(val).padStart(2, '0');
    });
  });

  // ã‚¸ãƒ£ãƒ³ãƒ—ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚
  function jumpToTime() {
    if (!player) return;
    const h = Number(document.getElementById('hours').value);
    const m = Number(document.getElementById('minutes').value);
    const s = Number(document.getElementById('seconds').value);
    if (isNaN(h) || isNaN(m) || isNaN(s)) {
      showMessage('ã‚¸ãƒ£ãƒ³ãƒ—æ™‚é–“ã®å…¥åŠ›ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚');
      return;
    }
    let time = h * 3600 + m * 60 + s;
    if (time > videoDuration) {
      showMessage('å‹•ç”»ã®é•·ã•ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚');
      return;
    }
    player.seekTo(time, true);
    clearMessage();
  }

  // å‹•ç”»ã®å†ç”Ÿæ™‚é–“ã‚’UIã«åæ˜ ã™ã‚‹ãŸã‚ã®intervalé–‹å§‹
  function startTimeSync() {
    if (timeUpdateInterval) clearInterval(timeUpdateInterval);
    timeUpdateInterval = setInterval(() => {
      if (!player || player.getPlayerState() !== YT.PlayerState.PLAYING) return;
      const time = player.getCurrentTime();
      updateTimeDisplay(time);
      // ã€åŒæœŸç„¡åŠ¹åŒ–ã€‘
      // ã“ã“ã¯ã‚¸ãƒ£ãƒ³ãƒ—æ™‚é–“å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå„ªå…ˆã§è‡ªå‹•æ›´æ–°ã—ã¾ã›ã‚“ã€‚
      // ã‚‚ã—ã‚¸ãƒ£ãƒ³ãƒ—å…¥åŠ›æ¬„ã®æ•°å€¤ã‚’å†ç”Ÿæ™‚é–“ã«åˆã‚ã›ãŸã„ãªã‚‰ã“ã“ã§ã‚»ãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚
    }, 500);
  }

  // intervalåœæ­¢
  function stopTimeSync() {
    if (timeUpdateInterval) {
      clearInterval(timeUpdateInterval);
      timeUpdateInterval = null;
    }
  }
</script>
</body>
</html>
